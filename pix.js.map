{"version":3,"file":"pix.js","sources":["../src/js/pix.js"],"sourcesContent":["import '../css/pix.css'; \nimport axios from \"axios\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst API_KEY = \"53378626-1c7fc3c0eb24b69adb1804063\";\nconst PER_PAGE = 20;\nconst DURATION_DELAY = 500; \n\nconst form1 = document.getElementById(\"search-form-1\");\nconst input1 = document.getElementById(\"search-input-1\");\nconst gallery1 = document.getElementById(\"gallery-1\"); \n\nconst loadMoreBtn = document.getElementById(\"load-more\");\nconst loadingText = document.getElementById(\"loading-text\");\nconst endMessage = document.getElementById(\"end-message\");\n\nlet query = \"\";\nlet page = 1;\nlet totalHits = 0;\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\n// --- EVENT LISTENERS ---\nform1.addEventListener(\"submit\", async (e) => {\n  e.preventDefault();\n  query = input1.value.trim();\n  if (!query) return;\n\n  resetUI();\n  \n  // Arama başladığında yükleme mesajını göster\n  showLoading(true); \n\n  await fetchImages();\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n  page++;\n  \n  // Butona basıldığında butonu gizle ve yükleme mesajını göster\n  loadMoreBtn.classList.add(\"hidden\"); \n  showLoading(true); \n\n  await fetchImages();\n});\n\n// --- FETCH FUNCTION ---\nasync function fetchImages() {\n  try {\n    const params = {\n      key: API_KEY,\n      q: query,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n      page,\n      per_page: PER_PAGE,\n    };\n\n    const { data } = await axios.get(\"https://pixabay.com/api/\", { params });\n\n    // Yükleme mesajının görünmesi için yapay gecikme ekle\n    await delay(DURATION_DELAY);\n\n    if (data.hits.length === 0 && page === 1) {\n      iziToast.error({ \n          message: \"Sorry, there are no images matching your search query. Please try again.\", \n          position: 'topRight' \n      });\n      endMessage.textContent = \"No results found.\";\n      endMessage.classList.remove(\"hidden\");\n      return;\n    }\n\n    renderGallery(data.hits);\n\n    totalHits = data.totalHits;\n    \n    // Load More button ve Bitiş Mesajı\n    if (page < Math.ceil(totalHits / PER_PAGE)) {\n      loadMoreBtn.classList.remove(\"hidden\");\n    } else {\n      loadMoreBtn.classList.add(\"hidden\");\n      endMessage.classList.remove(\"hidden\");\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'bottomCenter'\n      });\n    }\n\n    // YENİ: Otomatik kaydırma (Smooth Scroll)\n    if (page > 1) {\n        smoothScroll();\n    }\n    \n  } catch (error) {\n    console.error(\"Fetch Error:\", error);\n    iziToast.error({ message: \"Error fetching images!\", position: 'topRight' });\n  } finally {\n    // Yükleme işlemi bittiğinde mesajı gizle\n    showLoading(false); \n  }\n}\n\n// --- RENDER FUNCTION ---\nfunction renderGallery(images) {\n  // İstatistikleri içeren yapıyı oluşturma\n  const markup = images\n    .map(\n      (img) => `\n        <div class=\"photo-card\">\n          <a href=\"${img.largeImageURL}\">\n            <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" loading=\"lazy\"/>\n          </a>\n          <div class=\"info\">\n            <div class=\"info-item\">\n              Likes <b>${img.likes}</b>\n            </div>\n            <div class=\"info-item\">\n              Views <b>${img.views}</b>\n            </div>\n            <div class=\"info-item\">\n              Comments <b>${img.comments}</b>\n            </div>\n            <div class=\"info-item\">\n              Downloads <b>${img.downloads}</b>\n            </div>\n          </div>\n        </div>`\n    )\n    .join(\"\");\n\n  // Sadece ana galeriye ekle\n  gallery1.insertAdjacentHTML(\"beforeend\", markup);\n  \n  lightbox.refresh();\n}\n\n// --- HELPERS ---\nfunction resetUI() {\n  page = 1;\n  gallery1.innerHTML = \"\";\n  loadMoreBtn.classList.add(\"hidden\");\n  endMessage.classList.add(\"hidden\");\n  showLoading(false);\n}\n\nfunction showLoading(show) {\n  if (show) loadingText.classList.remove(\"hidden\");\n  else loadingText.classList.add(\"hidden\");\n}\n\nfunction delay(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nfunction smoothScroll() {\n    const { height: cardHeight } = gallery1.firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: \"smooth\",\n    });\n}"],"names":["API_KEY","PER_PAGE","DURATION_DELAY","form1","input1","gallery1","loadMoreBtn","loadingText","endMessage","query","page","totalHits","lightbox","SimpleLightbox","resetUI","showLoading","fetchImages","params","data","axios","delay","iziToast","renderGallery","smoothScroll","error","images","markup","img","show","ms","resolve","cardHeight"],"mappings":"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"}